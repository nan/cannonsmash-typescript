# ゲームプレイガイド

このドキュメントでは、「CannonSmash (TypeScript Port)」の基本的なゲームルールと操作方法について説明します。

## ゲームの目的

基本的な卓球のルールに基づいています。相手とラリーを続け、相手が返球できないようにショットを打ち、ポイントを獲得することを目指します。

## 操作方法

### 基本操作

-   **ポインターロック:**
    -   ゲーム画面をクリックするとポインターロックが有効になり、マウスカーソルが非表示になります。ゲーム操作に必須です。
    -   ポインターロックを解除するには、`ESC`キーを押します。

-   **プレイヤーの移動:**
    -   ポインターロック中、マウスを上下左右に動かすことで、プレイヤーがコート内を移動します。

### サーブ

サーブは、**一度のマウスクリック**でトスからヒットまでが**自動的に**行われます。

-   **サーブの実行:**
    -   サーブ権を持っている状態で、いずれかのマウスボタン（左、中、右）をクリックします。

-   **スピンの選択:**
    -   クリックするマウスボタンによって、サーブ時にボールにかかるスピン（回転）の種類が変わります。選択したサーブタイプによってスピンの効果は異なりますが、基本的な効果は以下の通りです。
        -   **左クリック:** スピンをかけない、フラットなサーブです。
        -   **中クリック:** 弱いトップスピン（順回転）をかけます。
        -   **右クリック:** 強いトップスピン（順回転）をかけます。

-   **サーブタイプの切り替え:**
    -   `スペース`キーを押すことで、サーブのタイプ（例：通常、横回転など）を順番に切り替えることができます。

### ラリー

ラリー中のスイングは、**自動で行われるバックスイング**と、**手動で行うフォワードスイング**の2段階の操作で行います。

-   **自動バックスイング:**
    -   相手が打ったボールが自コートに近づいてくると、プレイヤーは自動的にバックスイング（テイクバック）を行います。

-   **フォワードスイング（ショット）:**
    -   自動バックスイング中に、いずれかのマウスボタン（左、中、右）をクリックすることで、ボールを打ち返します。

### 応用操作：ショットの狙い

キーボードの特定のキーを押しながらショットを打つことで、相手コートの狙う位置を細かく指定することができます。

-   キーボードの左側（`Q`, `A`, `Z`など）は相手コートの左側、右側（`P`, `L`, `;`など）は右側に対応します。
-   キーボードの上段（`Q`, `W`, `E`など）は相手コートの奥、下段（`Z`, `X`, `C`など）は手前に対応します。

## ゲームルール

-   **サーブ:** サーブは、まず自コートで一度バウンドさせ、その後ネットを越えて相手コートに入れる必要があります。
-   **ラリー:** 相手からの返球は、自コートで一度だけバウンドした後に打ち返さなければなりません。ノーバウンドで打ち返したり（ダイレクト）、2回以上バウンドさせてしまったりした場合は失点となります。
-   **得点:** 以下の場合に相手の得点となります。
    -   打ったボールがネットにかかった。
    -   打ったボールが相手コートに入らず、外（アウト）になった。
    -   相手の打ったボールを打ち返せなかった。

## スコアシステム

-   11点を先に獲得したプレイヤーが1ゲームを取得します。
-   スコアが10対10になった場合はデュースとなり、その後2点差をつけたプレイヤーがゲームを取得します。
-   サーブ権は2ポイントごとに入れ替わります。
